import babel from '@babel/core';
import { isComponentDeclaration } from '@reskript/babel-utils';
const { types } = babel;
export default function addReactDisplayName() {
    return {
        visitor: {
            FunctionDeclaration(declaration) {
                var _a, _b;
                if (isComponentDeclaration(declaration)) {
                    const componentName = (_b = (_a = declaration.node.id) === null || _a === void 0 ? void 0 : _a.name) !== null && _b !== void 0 ? _b : '';
                    if (componentName) {
                        const assignDisplayName = types.expressionStatement(types.assignmentExpression('=', types.memberExpression(types.identifier(componentName), types.identifier('displayName')), types.stringLiteral(componentName)));
                        declaration.insertAfter(assignDisplayName);
                    }
                }
            },
        },
    };
}
